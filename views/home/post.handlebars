<!--
Created by: Edem Dumenu
Date: 4/19/2018
Description: This page displays the selected post
-->

<div class="row">
    <!-- Post Content Column -->
    <div class="col-md-8">
        <!-- Title -->
        <h1 class="my-5 text-white">{{post.title}}</h1>
        <!-- Author -->
        <p class="lead text-white">
            by
            <a href="#">{{post.user.firstName}}{{post.user.lastName}}</a>
        </p>
        <hr>
        <!-- Date/Time -->
        <p class="text-white">Posted on {{generateDate date "MMMM Do YYYY"}}</p>
        <hr>
        <!-- Preview Image -->
        <img class="img-fluid rounded" src="/uploads/{{post.file}}" alt="">
        <hr>
        <!-- Post Content -->
        <p  class="text-white">{{post.body}}</p>
        <hr>
        {{#if user}}

            {{#if post.allowComments}}
                <!-- Comments Form -->
                <div class="card my-4 bg-dark text-white">
                    <h5 class="card-header">Leave a Comment:</h5>
                    <div class="card-body">
                        <form action="/admin/comments" method="post">
                            <div class="form-group">
                                <textarea name="body" class="form-control" rows="3"></textarea>

                                <input type="hidden" value="{{post.id}}" name="id">
                            </div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>
                    </div>
                </div>

            {{else}}

                <h2 class="text-white">Comments not allowed for this</h2>
                <br>
                <hr>
            {{/if}}

        {{else}}

            <h1 class="text-white">You need to login to comment <a href="/login">Login</a></h1>
            <br>
            <hr>
        {{/if}}

        {{#each post.comments}}

            <!-- Single Comment -->
            <div class="media mb-4">
                <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
                <div class="media-body text-white">
                    <h5 class="mt-0 text-white">{{user.firstName}} {{user.lastName}}</h5>

                    {{body}}

                </div>
            </div>

        {{/each}}

    </div>

    {{> home/sidebar}}

</div>
<!-- /.row -->